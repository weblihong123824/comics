# Fun Box - æ–°æ¶æ„æ–‡æ¡£

## ğŸ—ï¸ é¡¹ç›®æ¶æ„

åŸºäºæ‚¨çš„éœ€æ±‚ï¼Œæˆ‘ä»¬é‡‡ç”¨äº†**2+1æ··åˆæ¶æ„**æ–¹æ¡ˆï¼š

### ğŸ“± å®¢æˆ·ç§»åŠ¨ç«¯ (apps/mobile-client)
- **æŠ€æœ¯æ ˆ**: React 19 + Vite + PWA
- **éƒ¨ç½²**: Cloudflare Pages (é™æ€æ‰˜ç®¡)
- **ç‰¹æ€§**: ç§»åŠ¨ç«¯ä¼˜åŒ–ã€ç¦»çº¿æ”¯æŒã€æ¨é€é€šçŸ¥
- **åŠŸèƒ½**: æ–‡ä»¶æµè§ˆã€ä¸Šä¼ ã€é¢„è§ˆã€ä¸ªäººä¸­å¿ƒ

### ğŸ”§ åå°ç®¡ç†ç«¯+æœåŠ¡ç«¯ (apps/admin-server)  
- **æŠ€æœ¯æ ˆ**: React Router 7 + SSR + Cloudflare Functions
- **éƒ¨ç½²**: Cloudflare Pages + Functions (Serverless)
- **ç‰¹æ€§**: æœåŠ¡ç«¯æ¸²æŸ“ã€APIé›†æˆã€æƒé™ç®¡ç†
- **åŠŸèƒ½**: ç”¨æˆ·ç®¡ç†ã€æ–‡ä»¶ç®¡ç†ã€æ•°æ®åˆ†æã€ç³»ç»Ÿè®¾ç½®

### ğŸ“¦ å…±äº«åŒ… (packages/)
- **shared-types**: TypeScriptç±»å‹å®šä¹‰
- **ui-components**: é€šç”¨UIç»„ä»¶åº“
- **utils**: å·¥å…·å‡½æ•°åº“

## ğŸš€ å¼€å‘æŒ‡å—

### ç¯å¢ƒè¦æ±‚
- Node.js 20+
- pnpm 8+

### å®‰è£…ä¾èµ–
```bash
pnpm install
```

### å¼€å‘å‘½ä»¤
```bash
# å¯åŠ¨æ‰€æœ‰åº”ç”¨
pnpm dev

# å•ç‹¬å¯åŠ¨ç§»åŠ¨ç«¯
pnpm dev:mobile

# å•ç‹¬å¯åŠ¨ç®¡ç†ç«¯
pnpm dev:admin

# æ„å»ºæ‰€æœ‰åº”ç”¨
pnpm build

# ç±»å‹æ£€æŸ¥
pnpm typecheck
```

### è®¿é—®åœ°å€
- ç§»åŠ¨ç«¯: http://localhost:5173
- ç®¡ç†ç«¯: http://localhost:5174

## ğŸ“ ç›®å½•ç»“æ„

```
fun-box/
â”œâ”€â”€ packages/                    # å…±äº«åŒ…
â”‚   â”œâ”€â”€ shared-types/           # å…±äº«TypeScriptç±»å‹
â”‚   â”œâ”€â”€ ui-components/          # å…±äº«UIç»„ä»¶
â”‚   â””â”€â”€ utils/                  # å…±äº«å·¥å…·å‡½æ•°
â”‚
â”œâ”€â”€ apps/
â”‚   â”œâ”€â”€ mobile-client/          # å®¢æˆ·ç§»åŠ¨ç«¯åº”ç”¨
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”‚   â”œâ”€â”€ pages/          # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ components/     # ç§»åŠ¨ç«¯ç»„ä»¶
â”‚   â”‚   â”‚   â””â”€â”€ services/       # APIæœåŠ¡
â”‚   â”‚   â”œâ”€â”€ public/
â”‚   â”‚   â””â”€â”€ wrangler.toml       # Cloudflareé…ç½®
â”‚   â”‚
â”‚   â””â”€â”€ admin-server/           # åå°+æœåŠ¡ç«¯
â”‚       â”œâ”€â”€ app/
â”‚       â”‚   â”œâ”€â”€ routes/
â”‚       â”‚   â”‚   â”œâ”€â”€ admin/      # åå°ç®¡ç†è·¯ç”±
â”‚       â”‚   â”‚   â””â”€â”€ api/        # APIè·¯ç”±
â”‚       â”‚   â”œâ”€â”€ components/
â”‚       â”‚   â”‚   â””â”€â”€ admin/      # åå°ä¸“ç”¨ç»„ä»¶
â”‚       â”‚   â””â”€â”€ services/       # åç«¯æœåŠ¡
â”‚       â””â”€â”€ wrangler.toml       # Cloudflareé…ç½®
â”‚
â”œâ”€â”€ .github/workflows/          # CI/CDé…ç½®
â”œâ”€â”€ wrangler.toml              # ä¸»Cloudflareé…ç½®
â”œâ”€â”€ turbo.json                 # Monorepoé…ç½®
â””â”€â”€ pnpm-workspace.yaml        # å·¥ä½œç©ºé—´é…ç½®
```

## ğŸŒ éƒ¨ç½²åˆ°Cloudflare

### å…ˆå†³æ¡ä»¶
1. åˆ›å»ºCloudflareè´¦æˆ·
2. å®‰è£…Wrangler CLI: `npm install -g wrangler`
3. ç™»å½•: `wrangler login`

### æ‰‹åŠ¨éƒ¨ç½²

#### ç§»åŠ¨ç«¯
```bash
cd apps/mobile-client
pnpm build
wrangler pages publish dist --project-name=fun-box-mobile
```

#### ç®¡ç†ç«¯
```bash
cd apps/admin-server  
pnpm build
wrangler pages publish build/client --project-name=fun-box-admin
```

### è‡ªåŠ¨éƒ¨ç½² (GitHub Actions)
1. åœ¨GitHubä»“åº“è®¾ç½®ä¸­æ·»åŠ Secrets:
   - `CLOUDFLARE_API_TOKEN`
   - `CLOUDFLARE_ACCOUNT_ID`

2. æ¨é€åˆ°mainåˆ†æ”¯è§¦å‘è‡ªåŠ¨éƒ¨ç½²

## ğŸ›¡ï¸ ç¯å¢ƒé…ç½®

### ç¯å¢ƒå˜é‡
åœ¨Cloudflare Pagesè®¾ç½®ä¸­é…ç½®ï¼š

**ç§»åŠ¨ç«¯**:
- `VITE_API_URL`: ç®¡ç†ç«¯APIåœ°å€

**ç®¡ç†ç«¯**:
- `NODE_ENV`: ç¯å¢ƒæ ‡è¯†
- `DATABASE_URL`: æ•°æ®åº“è¿æ¥
- `JWT_SECRET`: JWTå¯†é’¥

### CloudflareæœåŠ¡
1. **D1æ•°æ®åº“**: ç”¨æˆ·æ•°æ®ã€æ–‡ä»¶å…ƒæ•°æ®
2. **R2å­˜å‚¨**: æ–‡ä»¶å­˜å‚¨
3. **KVå­˜å‚¨**: ç¼“å­˜ã€ä¼šè¯
4. **Pages Functions**: APIæœåŠ¡

## ğŸ”„ è¿ç§»æŒ‡å—

### ä»æ—§æ¶æ„è¿ç§»
1. ç°æœ‰ä»£ç å·²ç»è¿ç§»åˆ°æ–°ç»“æ„
2. ç»„ä»¶å·²æå–åˆ°å…±äº«åŒ…
3. ä¿æŒåŸæœ‰åŠŸèƒ½ä¸å˜

### æ•°æ®è¿ç§»
- æ–‡ä»¶å…ƒæ•°æ®è¿ç§»åˆ°D1æ•°æ®åº“
- æ–‡ä»¶å†…å®¹è¿ç§»åˆ°R2å­˜å‚¨
- ç”¨æˆ·æ•°æ®ç»“æ„ä¿æŒå…¼å®¹

## ğŸ¯ ä¼˜åŠ¿å¯¹æ¯”

| ç‰¹æ€§ | æ—§æ¶æ„ | æ–°æ¶æ„ |
|------|--------|--------|
| éƒ¨ç½²æ–¹å¼ | å•ä¸€åº”ç”¨ | åˆ†ç¦»éƒ¨ç½² |
| ç§»åŠ¨ç«¯ä¼˜åŒ– | é€šç”¨å“åº”å¼ | ä¸“é—¨ä¼˜åŒ– |
| ç®¡ç†åŠŸèƒ½ | æ··åˆåœ¨ä¸€èµ· | ç‹¬ç«‹åå° |
| æ‰©å±•æ€§ | æœ‰é™ | é«˜åº¦å¯æ‰©å±• |
| æˆæœ¬ | å•ä¸€æœåŠ¡å™¨ | Serverless |
| æ€§èƒ½ | ä¸€èˆ¬ | å…¨çƒCDN |

## ğŸ“ ä¸‹ä¸€æ­¥

1. **æµ‹è¯•éªŒè¯**: ç¡®ä¿æ‰€æœ‰åŠŸèƒ½æ­£å¸¸
2. **æ•°æ®åº“è®¾è®¡**: è®¾è®¡D1æ•°æ®åº“schema
3. **APIå¼€å‘**: å®Œå–„APIæ¥å£
4. **éƒ¨ç½²é…ç½®**: é…ç½®ç”Ÿäº§ç¯å¢ƒ
5. **ç›‘æ§å‘Šè­¦**: è®¾ç½®ç›‘æ§å’Œæ—¥å¿—

éœ€è¦å¸®åŠ©æˆ–æœ‰ç–‘é—®ï¼Œè¯·éšæ—¶è”ç³»ï¼
